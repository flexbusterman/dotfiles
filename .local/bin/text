#!/usr/bin/env bash
APPID="scratchpad"
TITLE="Scratchpad"
TERMINAL="kitty"
TMPFILE=$(mktemp /tmp/scratchpad.XXXXXX)

# Clipboard tool (auto-detect)
if command -v wl-copy &> /dev/null; then
    CLIP="wl-copy"
elif command -v xclip &> /dev/null; then
    CLIP="xclip -selection clipboard"
else
    echo "No clipboard tool found (xclip or wl-copy required)"
    exit 1
fi

$TERMINAL --class "$APPID" --title "$TITLE" -e nvim -c 'startinsert' "$TMPFILE"

if [ -s "$TMPFILE" ]; then
    cat "$TMPFILE" | $CLIP
    echo "Copied contents to clipboard."
else
    echo "Scratchpad was empty, nothing copied."
fi

rm -f "$TMPFILE"
